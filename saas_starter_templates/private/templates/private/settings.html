{% extends "base.html" %}

{% block title %}Dashboard Settings - ${PROJECT_NAME}{% endblock %}

{% block content %}
<div class="section">
    <div class="container">
        <h1 class="title">Dashboard Settings</h1>
        
        <div class="box">
            <h2 class="title is-4">Widget Configuration</h2>
            <form hx-post="{% url 'private:update_settings' %}"
                  hx-target="#settings-form"
                  hx-swap="outerHTML"
                  id="settings-form">
                {% csrf_token %}
                
                <div class="field">
                    <label class="label">Layout</label>
                    <div class="control">
                        <div class="select">
                            <select name="layout">
                                <option value="grid">Grid</option>
                                <option value="list">List</option>
                                <option value="compact">Compact</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="field">
                    <label class="label">Refresh Interval</label>
                    <div class="control">
                        <div class="select">
                            <select name="refresh_interval">
                                <option value="0">Manual</option>
                                <option value="30">30 seconds</option>
                                <option value="60">1 minute</option>
                                <option value="300">5 minutes</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="field">
                    <label class="label">Visible Widgets</label>
                    <div class="control">
                        <label class="checkbox">
                            <input type="checkbox" name="widgets[]" value="stats">
                            Statistics
                        </label>
                        <br>
                        <label class="checkbox">
                            <input type="checkbox" name="widgets[]" value="chart">
                            Charts
                        </label>
                        <br>
                        <label class="checkbox">
                            <input type="checkbox" name="widgets[]" value="activity">
                            Activity Feed
                        </label>
                    </div>
                </div>

                <div class="field">
                    <label class="label">Theme</label>
                    <div class="control">
                        <label class="radio">
                            <input type="radio" name="theme" value="light">
                            Light
                        </label>
                        <label class="radio">
                            <input type="radio" name="theme" value="dark">
                            Dark
                        </label>
                        <label class="radio">
                            <input type="radio" name="theme" value="system">
                            System Default
                        </label>
                    </div>
                </div>

                <div class="field">
                    <div class="control">
                        <button type="submit" class="button is-primary">
                            Save Settings
                        </button>
                    </div>
                </div>
            </form>
        </div>

        <div class="box">
            <h2 class="title is-4">Data Management</h2>
            <div class="buttons">
                <button class="button is-warning"
                        hx-post="{% url 'private:clear_data' %}"
                        hx-confirm="Are you sure? This will clear all your dashboard data.">
                    Clear Dashboard Data
                </button>
                <button class="button is-info"
                        hx-get="{% url 'private:export_data' %}"
                        hx-swap="none">
                    Export Dashboard Data
                </button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        htmx.on('htmx:afterSwap', function(evt) {
            if (evt.detail.target.id === 'settings-form') {
                const notification = document.createElement('div');
                notification.className = 'notification is-success';
                notification.innerHTML = `
                    <button class="delete"></button>
                    Settings updated successfully!
                `;
                evt.detail.target.parentElement.insertBefore(notification, evt.detail.target);
            }
        });
    });
</script>
{% endblock %} 