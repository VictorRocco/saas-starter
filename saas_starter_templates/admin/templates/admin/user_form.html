{% extends "base.html" %}

{% block title %}{% if user %}Edit User{% else %}Create User{% endif %} - ${PROJECT_NAME}{% endblock %}

{% block content %}
<div class="section">
    <div class="container">
        <div class="columns is-centered">
            <div class="column is-8">
                <div class="box">
                    <h1 class="title">{% if user %}Edit User{% else %}Create User{% endif %}</h1>

                    <form method="post">
                        {% csrf_token %}

                        {% if form.errors %}
                        <div class="notification is-danger">
                            <button class="delete"></button>
                            {% for field in form %}
                                {% for error in field.errors %}
                                    <p>{{ error }}</p>
                                {% endfor %}
                            {% endfor %}
                        </div>
                        {% endif %}

                        <div class="field">
                            <label class="label">Username</label>
                            <div class="control">
                                <input class="input" type="text" name="username" 
                                       value="{{ user.username|default:'' }}"
                                       {% if user %}readonly{% endif %} required>
                            </div>
                        </div>

                        <div class="field">
                            <label class="label">Email</label>
                            <div class="control">
                                <input class="input" type="email" name="email" 
                                       value="{{ user.email|default:'' }}" required>
                            </div>
                        </div>

                        {% if not user %}
                        <div class="field">
                            <label class="label">Password</label>
                            <div class="control">
                                <input class="input" type="password" name="password1" required>
                            </div>
                        </div>

                        <div class="field">
                            <label class="label">Confirm Password</label>
                            <div class="control">
                                <input class="input" type="password" name="password2" required>
                            </div>
                        </div>
                        {% endif %}

                        <div class="field">
                            <label class="label">First Name</label>
                            <div class="control">
                                <input class="input" type="text" name="first_name" 
                                       value="{{ user.first_name|default:'' }}">
                            </div>
                        </div>

                        <div class="field">
                            <label class="label">Last Name</label>
                            <div class="control">
                                <input class="input" type="text" name="last_name" 
                                       value="{{ user.last_name|default:'' }}">
                            </div>
                        </div>

                        <div class="field">
                            <div class="control">
                                <label class="checkbox">
                                    <input type="checkbox" name="is_active"
                                           {% if user.is_active %}checked{% endif %}>
                                    Active
                                </label>
                            </div>
                        </div>

                        <div class="field">
                            <div class="control">
                                <label class="checkbox">
                                    <input type="checkbox" name="is_staff"
                                           {% if user.is_staff %}checked{% endif %}>
                                    Staff Status
                                </label>
                            </div>
                        </div>

                        <div class="field is-grouped">
                            <div class="control">
                                <button type="submit" class="button is-primary">
                                    {% if user %}Update{% else %}Create{% endif %}
                                </button>
                            </div>
                            <div class="control">
                                <a href="{% url 'admin:user_list' %}" class="button is-light">
                                    Cancel
                                </a>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %} 